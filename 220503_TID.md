# 5ì›” 3ì¼ (í™”)

## ì˜¤ëŠ˜ í•œ ì¼

* ìœµí•© í”„ë¡œì íŠ¸

  * 00:02

    * `from collections import Counter`ë¥¼ ì‚¬ìš©í•´ì„œ Like ìˆ˜ë¥¼ ë§ì´ ë°›ì€ ìˆœìœ¼ë¡œ ì²˜ë¦¬í•´ë³´ì.
    * ![image](https://user-images.githubusercontent.com/75322297/166257092-e1710eae-caf2-469d-89c1-19c8e50b8c5b.png)

  * 00:38

    * `.selected_related()`ë¥¼ ì‚¬ìš©í•´ joiní•´ì¤€ë‹¤.

    * ê·¸ë¦¬ê³  ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¥¼ ë³€ìˆ˜ í•˜ë‚˜(`like_rank`)ì— ì €ì¥í•´ì¤€ë‹¤.

    * ë°›ì€ ê°ì²´ì—ì„œ ë°˜ë³µë¬¸ì„ í†µí•´ ì‘ì„±ìì˜ ì´ë¦„ì„ ë½‘ì•„ë‚¸ í›„ ë¦¬ìŠ¤íŠ¸ì— append

    * ê·¸ë¦¬ê³  `Counter()`ë¥¼ ì‚¬ìš©í•´ ê³ ìœ ê°’ê³¼ ê·¸ ê°œìˆ˜ë¥¼ ì¶”ì¶œí•˜ê³ 

    * `.keys()`ë¥¼ listí™” í•´ì„œ rank_namesì— ì €ì¥, `values()`ë¥¼ listí™” í•´ì„œ rank_like_numsì— ì €ì¥ 

    * `.filter()` ì‚¬ìš© ì‹œ, `__in=[]`ë¥¼ ì‚¬ìš©í•˜ë©´ ì¡°ê±´ì— ë§ëŠ” ì—¬ëŸ¬ ì¿¼ë¦¬ì…‹ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.

      * ì°¸ê³  : [https://devvvyang.tistory.com/37](https://devvvyang.tistory.com/37)

    * ```python
      def ranking(request):
          users = User.objects.all()
          reviews = Review.objects.all()
          comments = Comment.objects.all()
          
          # ë¦¬ë·° ì‘ì„± ìˆ˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬(ì‘ì„±ì, ì‘ì„± ë¦¬ë·° ìˆ˜)
          # review_count = Review.objects.values('author').order_by('author').annotate(count=Count('author'))
          
          
          # ì¢‹ì•„ìš” ìˆ˜ ì¡°ì¸ ë„ì „
          
          
          like_join = Like.objects.select_related('review_id')
          like_rank = []
          for obj in like_join:
              like_rank.append(obj.review_id.author.username)
          rank = Counter(like_rank)
          rank_names = list(rank.keys())
          rank_like_nums = list(rank.values()) 
          
          rank_objs = User.objects.filter(username__in=rank_names)
          context = {
              'users': users,
              'reviews': reviews,
              'comments': comments,
              # 'review_count': review_count,
              'rank_objs':rank_objs,
              'rank_like_nums':rank_like_nums,
          }
          return render(request, 'member/ranking.html', context)
      ```

  * 00:54

    * Counter í•¨ìˆ˜ ê°’ì˜ ë‚´ë¦¼ì°¨ìˆœ ìë™ ì •ë ¬ : `.most_common()`

  * 00:55

    * ì¢‹ì•„ìš” ìˆ˜ëŠ” ì•Œë§ê²Œ ë‚˜ì˜¤ì§€ë§Œ, ì¿¼ë¦¬ì…‹ì´ `username`ìœ¼ë¡œ ìë™ ì •ë ¬ë˜ì„œ ë‚˜ì˜¨ë‹¤. ì´ëŸ¬ë©´ì•ˆë˜ëŠ”ë°!

  * 01:07

    * ì¼ë‹¨ ìê³  ì¼ì–´ë‚˜ì„œ í…œí”Œë¦¿ ì–¸ì–´ì¢€ ê³µë¶€í•´ì•¼ê² ë‹¤.

  * 01:29

    * multi for loop : [https://velog.io/@juliajh/Django-template%EC%97%90%EC%84%9C-index-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0multi-for-loop](https://velog.io/@juliajh/Django-template%EC%97%90%EC%84%9C-index-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0multi-for-loop)
      * ë¦¬ìŠ¤íŠ¸ë¥¼ views.pyì—ì„œ zipí•œë‹¤ìŒ, í…œí”Œë¦¿ì—ì„œ ì‚¬ìš©

  * 08:15

    * ```python
      {% extends 'base.html' %}
      
      {% block content %}
      <div class="meok-rank">
          <h1>ë¨¹ë³´ ë­í‚¹ğŸ†</h1>
          {% for name, num in rank_list %}
              <div class="rank_box" id="rank-{{ forloop.counter }}">
                  
              </div>
              {{ forloop.counter }}{{ 'ìœ„' }}
              {{ name }} {{ 'ë‹˜' }}  {{ 'ì¢‹ì•„ìš”' }} {{ num }} {{ 'ê°œ' }}
          {% endfor %}
          
          {{ rank_names|length }}
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          {{ rank_objs }}
      </div>
      
      {% endblock %}
      ```

    * ![image](https://user-images.githubusercontent.com/75322297/166341063-49ef5857-ae2d-4386-9b86-ff42c6652a25.png)

    * `forloop.counter`ì˜ ìœ ìš©í•œ ì ì€ 1ë¶€í„° ì‹œì‘í•  ìˆ˜ë„ ìˆê³  0ë¶€í„°(conter0) ì‹œì‘í•  ìˆ˜ë„ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.